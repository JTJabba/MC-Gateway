<Project Sdk="Microsoft.NET.Sdk.Worker">

	<PropertyGroup>
		<TargetFramework>net7.0</TargetFramework>
		<Nullable>enable</Nullable>
		<ImplicitUsings>enable</ImplicitUsings>
		<IsPackable>true</IsPackable>
		<GeneratePackageOnBuild>true</GeneratePackageOnBuild>
		<PackageId>MCGateway</PackageId>
		<Title>MCGateway</Title>
		<Version>0.0.81</Version>
		<Authors>JTJabba</Authors>
		<UserSecretsId>dotnet-ReverseProxy-1225C1A2-DAF7-4A65-B78C-C92ADFBE9D03</UserSecretsId>
		<AllowUnsafeBlocks>true</AllowUnsafeBlocks>
	</PropertyGroup>

	<ItemGroup>
		<AdditionalFiles Include="settings.MCGateway.template.json" CopyToOutputDirectory="Always" />
		<AdditionalFiles Include="translations.MCGateway.template.json" CopyToOutputDirectory="Always" />
	</ItemGroup>

	<ItemGroup>
		<PackageReference Include="FastEnum" Version="1.8.0" />
		<PackageReference Include="JTJabba.EasyConfig" Version="1.1.0" />
		<PackageReference Include="Microsoft.Extensions.Hosting" Version="6.0.1" />
		<PackageReference Include="MiNET.fnbt" Version="1.0.22" />
		<PackageReference Include="JTJabba.Utils" Version="0.0.13" />
		<PackageReference Include="Portable.BouncyCastle" Version="1.9.0" />
	</ItemGroup>

	<PropertyGroup>
		<TieredCompilation>false</TieredCompilation>
		<OutputType>Library</OutputType>
	</PropertyGroup>

</Project>

<!--TODO:

replace shit POC caching method in EarlyConnectionHandler with a uint64 checksum of bytes sequence
as primary key in dictionary that gets looked up and confirmed against if there's a hit

need to get stopListening implemented correctly

need to check everywhere _compressionThreshold of 0 doesn't disable compression

need to decide how to deal with UUID in offline mode. MCClientConnection currently generates random one

look into writing packets to stream together for pre play state stuff

need to look through GatewayConnection.GetGatewayConnection and account for all cases where IMCClientConnection could throw.

add logging for writepacket failing to compress

add logging for exceptions in writepacket and account for ObjectDisposedExceptions as smooth shutdowns
-->